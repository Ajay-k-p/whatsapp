/* src/styles/app.css
  Complete WhatsApp-like theme (dark + light)
 - Save as src/styles/app.css
 - The sidebar header image uses: /mnt/data/Screenshot 2025-11-23 181559.png
*/

/* -------------------------
  Variables & theme tokens
 ------------------------- */
:root {
 --bg: #0b0f12;
 --sidebar-bg: #0f1315;
 --panel-bg: #071011;
 --muted: #98a0a6;
 --accent: #00a884;
 --bubble-other: #172022;
 --bubble-mine: #054640;
 --text: #e6eef1;
 --subtle: #9aa6ad;
 --unread: #25D366;
 --header-grad: linear-gradient(90deg, rgba(0,0,0,0.12), rgba(0,0,0,0.02));
 --glass: rgba(255,255,255,0.03);
 --shadow: rgba(2,6,10,0.6);
 --max-width: 1300px;
 --radius: 12px;
 --transition: 180ms ease;
 --input-bg: rgba(255,255,255,0.02);
 --border: rgba(255,255,255,0.04);
  --chat-bg: #e5ddd5; /* Added a default chat background for panel */
  --text-primary: var(--text);
  --text-secondary: var(--subtle);
  --sidebar-header-bg: var(--sidebar-bg);
}

/* Light theme overrides */
:root[data-theme="light"] {
 --bg: #f2f3f5;
 --sidebar-bg: #ffffff;
 --panel-bg: #e5ddd5; /* Use standard WhatsApp light background */
 --muted: #60656b;
 --accent: #008069;
 --bubble-other: #ffffff;
 --bubble-mine: #dcf8c6;
 --text: #111314;
 --subtle: #6b7076;
 --glass: rgba(0,0,0,0.03);
 --border: rgba(0,0,0,0.06);
 --input-bg: rgba(0,0,0,0.04);
  --chat-bg: #e5ddd5;
}

/* -------------------------
  Base
 ------------------------- */
* { box-sizing: border-box; }
html, body, #root {
 height: 100%;
 margin: 0;
 padding: 0;
 background: var(--bg);
 color: var(--text);
 font-family: "Inter", "Segoe UI", Roboto, Arial, sans-serif;
 -webkit-font-smoothing:antialiased;
 -moz-osx-font-smoothing:grayscale;
}
a { color: inherit; text-decoration: none; }
button { font-family: inherit; }

/* Container layout */
.app-shell {
 display: flex;
 min-height: 100vh;
 width: 100%;
 justify-content: center;
 background: var(--bg);
}
.app-inner {
 display: flex;
 width: 100%;
 max-width: var(--max-width);
 height: 100vh;
 margin: 0 12px;
 box-shadow: 0 8px 30px rgba(0,0,0,0.25);
 border-radius: 10px;
 overflow: hidden;
}

/* -------------------------
  Sidebar
 ------------------------- */
.wa-sidebar {
 width: 360px;
 min-width: 300px;
 max-width: 360px;
 background: var(--sidebar-bg);
 display: flex;
 flex-direction: column;
 border-right: 1px solid var(--border);
 transition: background var(--transition), width 220ms;
}

/* header banner / avatar */
.wa-header {
 display: flex;
 align-items: center;
 justify-content: space-between;
 padding: 12px 14px;
 gap: 12px;
 border-bottom: 1px solid var(--border);
 background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
}
.wa-header-left {
 display:flex;
 align-items:center;
 gap:12px;
}
.wa-header-avatar {
 width:44px;
 height:44px;
 border-radius:10px;
 object-fit:cover;
 box-shadow: 0 2px 8px rgba(0,0,0,0.25);
 background: var(--glass);
 border: 1px solid var(--border);
}
.wa-header-title { display:flex; flex-direction:column; }
.wa-title-main { font-weight:700; font-size:15px; letter-spacing:0.1px; }
.wa-title-sub { font-size:12px; color:var(--subtle); margin-top:2px; }

/* header actions */
.wa-header-actions { display:flex; gap:8px; align-items:center; }
.icon-btn {
 background:transparent;
 border:none;
 color:var(--text);
 padding:8px;
 border-radius:8px;
 cursor:pointer;
 transition: background var(--transition);
}
.icon-btn:hover { background: rgba(255,255,255,0.02); }

/* controls (new chat + toggle) */
.wa-sidebar-controls {
 padding: 10px 12px;
 display:flex;
 gap:10px;
 align-items:center;
 justify-content:space-between;
}
.wa-new-chat {
 background: var(--accent);
 color: white;
 border: none;
 padding:8px 12px;
 border-radius: 10px;
 cursor:pointer;
 font-weight:600;
 box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

/* search */
.wa-search { padding:10px 12px; }
.wa-search input {
 width:100%;
 padding:10px 12px;
 border-radius:999px;
 border:none;
 background: var(--input-bg);
 color:var(--text);
 outline:none;
 transition: box-shadow var(--transition);
}
.wa-search input:focus { box-shadow: 0 4px 20px rgba(0,0,0,0.25); }

/* chat list container */
.wa-chatlist {
 flex: 1;
 overflow-y: auto;
 padding: 8px 6px;
 -webkit-overflow-scrolling: touch;
}

/* chat item */
.wa-chatitem {
 display:flex;
 gap:12px;
 padding:10px 12px;
 align-items:center;
 cursor:pointer;
 border-radius:10px;
 transition: background var(--transition), transform 120ms;
}
.wa-chatitem:hover { background: rgba(255,255,255,0.02); transform: translateY(-1px); }
.wa-chatitem.active { background: rgba(0,0,0,0.06); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.02); }

.wa-chatitem-avatar {
 width:48px;
 height:48px;
 border-radius:50%;
 object-fit:cover;
 flex-shrink:0;
 border:1px solid var(--border);
 background: var(--glass);
 position: relative;
}

.wa-chatitem-body { flex:1; min-width:0; display:flex; flex-direction:column; gap:6px; }
.wa-chatitem-row { display:flex; justify-content:space-between; align-items:center; }
.wa-chatitem-name { font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:65%; }
.wa-chatitem-time { font-size:12px; color:var(--subtle); }
.wa-chatitem-sub { display:flex; align-items:center; justify-content:space-between; gap:8px; color:var(--muted); font-size:13px; }
.wa-chatitem-last { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70%; }
.wa-chatitem-unread { background: var(--accent); color:white; padding:4px 8px; border-radius:16px; font-weight:700; font-size:12px; }

/* online dot (small circle at bottom-right of avatar) */
.wa-online-dot {
 position: absolute;
 right: 2px;
 bottom: 2px;
 width: 12px;
 height: 12px;
 border-radius: 50%;
 background: #808080;
 border: 2px solid var(--sidebar-bg);
 box-shadow: 0 0 6px rgba(0,0,0,0.5);
}
.wa-online-dot.online {
 background: var(--unread); /* green */
 box-shadow: 0 0 6px rgba(37,211,102,0.18);
}

/* empty placeholder */
.wa-empty { padding:20px; text-align:center; color:var(--subtle); }

/* -------------------------
  Chat panel
 ------------------------- */
.wa-panel {
 flex: 1;
 display:flex;
 flex-direction:column;
 background: var(--panel-bg);
}

/* top bar within panel */
.wa-topbar {
 height:64px;
 display:flex;
 align-items:center;
 justify-content:space-between;
 padding:8px 16px;
 border-bottom:1px solid var(--border);
 background: linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
}
.wa-topbar-left { display:flex; align-items:center; gap:12px; }
.wa-topbar-avatar { width:42px; height:42px; border-radius:8px; object-fit:cover; border:1px solid var(--border); }
.wa-topbar-title { font-weight:700; }
.wa-topbar-sub { font-size:12px; color:var(--subtle); }

/* messages area */
.wa-chatwindow {
 display:flex;
 flex-direction:column;
 height: calc(100vh - 64px);
 overflow: hidden;
}

/* messages scroller */
.wa-messages {
 flex:1;
 overflow-y:auto;
 padding: 20px;
 display:flex;
 flex-direction:column;
 gap:8px;
 scroll-behavior: smooth;
}

/* bubble rows */
.wa-bubble-row { display:flex; width:100%; }
.wa-bubble-row.mine { justify-content:flex-end; }
.wa-bubble-row.theirs { justify-content:flex-start; }

/* bubble box */
.wa-bubble {
 max-width: 62%;
 padding: 8px 10px;
 border-radius: 12px;
 box-shadow: 0 2px 8px rgba(0,0,0,0.12);
 background: var(--bubble-other);
 color: var(--text);
 position: relative;
 display:inline-block;
 word-wrap: break-word;
}
.wa-bubble-row.mine .wa-bubble { background: var(--bubble-mine); color: #fff; }

/* deleted message */
.wa-deleted {
 font-style: italic;
 color: var(--subtle);
}

/* media in bubble */
.wa-img, .wa-video, .wa-audio {
 display:block;
 width:100%;
 border-radius:8px;
 margin-top:8px;
}
.wa-video { max-height:360px; }
.wa-img { max-height:360px; object-fit:cover; }

/* meta area (time + ticks) */
.wa-meta {
 display:flex;
 align-items:center;
 justify-content:flex-end;
 gap:8px;
 margin-top:8px;
 color:var(--subtle);
 font-size:12px;
}

/* ticks */
.wa-ticks { margin-left:6px; display:inline-flex; align-items:center; gap:4px; }
.wa-ticks .single { color: var(--subtle); }
.wa-ticks .double { color: var(--subtle); font-weight:700; }
.wa-ticks .blue { color:#0b93f6; font-weight:700; }

/* reactions area (small badges under each bubble) */
.wa-reactions {
 margin-top:6px;
 display:flex;
 gap:6px;
 flex-wrap:wrap;
}
.wa-reactions .reaction-badge {
 background: rgba(0,0,0,0.12);
 border-radius: 14px;
 padding: 4px 8px;
 font-size: 13px;
 display:flex;
 align-items:center;
 gap:6px;
 color: var(--text);
 box-shadow: 0 2px 6px rgba(0,0,0,0.12);
}
[data-theme="light"] .wa-reactions .reaction-badge { background: rgba(255,255,255,0.9); color: #222; }

/* typing indicator */
.wa-typing {
 color:var(--subtle);
 font-style:italic;
 margin: 8px 0;
}

/* reaction popup (context menu style) */
.wa-reaction-popup {
 position: fixed;
 z-index: 2000;
 bottom: 110px; /* default near input; JS can reposition if desired */
 left: 50%;
 transform: translateX(-50%);
 display:flex;
 gap:10px;
 background: rgba(0,0,0,0.6);
 padding: 10px 12px;
 border-radius: 30px;
 box-shadow: 0 6px 20px rgba(0,0,0,0.4);
 backdrop-filter: blur(6px);
}
.wa-reaction-popup span {
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:20px;
 cursor:pointer;
 padding:6px;
 border-radius:50%;
 transition: transform var(--transition);
}
.wa-reaction-popup span:hover { transform: scale(1.12); }
.wa-reaction-popup .delete-all {
 margin-left: 8px;
 font-size: 14px;
 color: #ffdddd;
 background: rgba(128,0,0,0.18);
 padding: 6px 8px;
 border-radius: 10px;
}

/* -------------------------
  Input row
 ------------------------- */
.wa-inputbar {
 padding:12px;
 display:flex;
 align-items:center;
 gap:8px;
 border-top:1px solid var(--border);
 background: linear-gradient(180deg, transparent, rgba(0,0,0,0.02));
}
.wa-input {
 flex: 1;
 padding: 10px 14px;
 border-radius: 22px;
 border: none;
 outline: none;
 background: var(--input-bg);
 color: var(--text);
 font-size: 14px;
}
.wa-sendbtn {
 background: var(--accent);
 color: white;
 padding: 10px 14px;
 border-radius: 999px;
 border: none;
 cursor: pointer;
 font-weight:700;
}

/* focus ring improvements */
.wa-input:focus { box-shadow: 0 6px 18px rgba(0,0,0,0.25); }

/* -------------------------
  Responsive layout
 ------------------------- */
@media (max-width: 900px) {
 .wa-sidebar { width: 100%; max-width: none; min-width: 0; position: relative; height: auto; }
 .app-inner { flex-direction: column; max-width: 100%; height: auto; }
 .wa-panel { height: auto; }
 .wa-messages { padding: 12px; }
 .wa-bubble { max-width: 86%; }
}

/* -------------------------
  Scrollbar styling
 ------------------------- */
.wa-chatlist::-webkit-scrollbar,
.wa-messages::-webkit-scrollbar {
 width: 10px;
}
.wa-chatlist::-webkit-scrollbar-thumb,
.wa-messages::-webkit-scrollbar-thumb {
 background: rgba(255,255,255,0.04);
 border-radius: 8px;
}

/* -------------------------
  Small helpers
 ------------------------- */
.text-muted { color: var(--subtle); }
.flex { display:flex; }
.center { display:flex; align-items:center; justify-content:center; }

/* -------------------------
  Header image usage (uses uploaded file path)
 ------------------------- */
.wa-header-avatar {
 display: none;
}

/* End of app.css */
.wa-app {
  display: flex;
  height: 100vh;
  background: var(--chat-bg);
}

.wa-chat-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

/* === SIDEBAR HEADER (Logout + User Info) === */

.wa-sidebar-header {
  height: 60px;
  background: var(--sidebar-header-bg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
}

.wa-sidebar-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.wa-logout-btn {
  background: #d9534f;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.wa-logout-btn:hover {
  background: #c9302c;
}

/* USER ICON LEFT (optional) */
.wa-user-info {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-primary);
}

.wa-user-initial {
  width: 38px;
  height: 38px;
  background: var(--input-bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 16px;
  color: var(--text-primary);
}

.wa-user-name {
  font-size: 16px;
  font-weight: 500;
}
/* Media upload preview box */
.wa-media-wrapper {
 display: flex;
 flex-direction: column;
}

.wa-file-input {
 cursor: pointer;
}

.wa-media-preview {
 margin-top: 6px;
 background: var(--bubble-other);
 padding: 6px 10px;
 border-radius: 10px;
 display: flex;
 align-items: center;
 gap: 10px;
}

.wa-media-name {
 font-size: 13px;
 color: var(--text);
 max-width: 120px;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
}

.wa-media-send-btn {
 background: var(--accent);
 border: none;
 color: white;
 font-size: 13px;
 padding: 6px 10px;
 border-radius: 6px;
 cursor: pointer;
}

.wa-media-cancel {
 background: transparent;
 border: none;
 color: #ff6b6b;
 cursor: pointer;
 font-size: 18px;
}
/* Media upload preview box */
.wa-media-wrapper {
 display: flex;
 flex-direction: column;
}

.wa-file-input {
 cursor: pointer;
}

.wa-media-preview {
 margin-top: 6px;
 background: var(--bubble-other);
 padding: 6px 10px;
 border-radius: 10px;
 display: flex;
 align-items: center;
 gap: 10px;
}

.wa-media-name {
 font-size: 13px;
 color: var(--text);
 max-width: 120px;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
}

.wa-media-send-btn {
 background: var(--accent);
 border: none;
 color: white;
 font-size: 13px;
 padding: 6px 10px;
 border-radius: 6px;
 cursor: pointer;
}

.wa-media-cancel {
 background: transparent;
 border: none;
 color: #ff6b6b;
 cursor: pointer;
 font-size: 18px;
}
.wa-user-avatar {
 width: 42px;
 height: 42px;
 border-radius: 50%;
 overflow: hidden;
 background: var(--input-bg);
 display: flex;
 align-items: center;
 justify-content: center;
}

.wa-user-avatar-img {
 width: 100%;
 height: 100%;
 object-fit: cover;
}

.wa-avatar-placeholder-small {
 width: 42px;
 height: 42px;
 border-radius: 50%;
 background: var(--input-bg);
 color: var(--text);
 display: flex;
 align-items: center;
 justify-content: center;
 font-weight: bold;
}
/* Small round avatar */
.wa-user-avatar {
 width: 48px;
 height: 48px;
 border-radius: 50%;
 overflow: hidden;
 background: #222;
 display: flex;
 align-items: center;
 justify-content: center;
}

.wa-user-avatar-img {
 width: 100%;
 height: 100%;
 object-fit: cover;
}

/* Placeholder circle */
.wa-avatar-placeholder-small {
 width: 48px;
 height: 48px;
 border-radius: 50%;
 background: #555;
 display: flex;
 align-items: center;
 justify-content: center;
 color: white;
 font-size: 20px;
 font-weight: bold;
}
/* ===========================
  AUDIO BUBBLE – WHATSAPP STYLE
 =========================== */

.wa-audio-bubble {
 display: flex;
 align-items: center;
 gap: 12px;
 background: transparent; /* bubble background already applied */
 padding: 4px 0;
 width: 100%;
}

.wa-audio-avatar {
 width: 38px;
 height: 38px;
 border-radius: 50%;
 overflow: hidden;
 flex-shrink: 0;
 cursor: pointer;
 background: rgba(255,255,255,0.15);
}

.wa-audio-avatar img {
 width: 100%;
 height: 100%;
 object-fit: cover;
}

.wa-avatar-placeholder {
 width: 100%;
 height: 100%;
 font-size: 17px;
 color: white;
 display: flex;
 align-items: center;
 justify-content: center;
}

.wa-audio-player {
 width: 140px; /* realistic WhatsApp width */
 height: 36px;
 filter: invert(1); /* fixes dark/light problem */
}

.wa-audio-info {
 font-size: 12px;
 color: var(--subtle);
 margin-left: auto;
}

/* --- FIXES FOR OVERLAPPING IMAGE --- */

/* CRITICAL: Ensure the sidebar itself does not allow content to overflow its boundaries. */
.wa-sidebar {
    overflow: hidden; /* Prevent large children (like an image) from pushing outside */
    position: relative; /* Ensure z-index and positioning works correctly within the sidebar */
    width: 360px !important; /* Re-assert fixed width if something is fighting it */
}

/* Target and constrain any image elements within the sidebar that are NOT avatars/icons. */
.wa-sidebar img:not(.wa-chatitem-avatar, .wa-header-avatar, .wa-user-avatar-img) {
    max-width: 100%;
    height: auto;
    /* If the large image is set as a background, this won't work. Check React JSX. */
}

/* FIX — Prevent wallpaper from showing in sidebar */
.wa-sidebar, 
.wa-sidebar * {
 background-image: none !important;
 /* Use standard background, but only on elements that need it, avoid !important if possible */
}

/* The app inner wrapper should have no background (it's split) */
.app-inner {
 background: none !important;
}

/* Sidebar Header background is explicitly set */
.wa-sidebar-header {
 background: var(--sidebar-bg) !important;
}
/* ===========================
PROFILE PAGE STYLING
=========================== */

/* Main Container */
.wa-profile-page-container {
 width: 100%;
 max-width: 600px; /* Optional: Constrain on wide screens */
 margin: 0 auto;
 min-height: 100vh;
 background-color: var(--bg); /* Dark background */
 color: var(--text);
}

/* Header/Top Bar */
.wa-profile-header {
 display: flex;
 align-items: center;
 padding: 16px;
 background-color: var(--panel-bg); /* Use panel background for a slight lift */
 box-shadow: 0 1px 4px var(--shadow);
 height: 60px;
}

.wa-back-arrow {
 font-size: 24px;
 cursor: pointer;
 margin-right: 20px;
 color: var(--text);
}

.wa-profile-title {
 font-size: 18px;
 font-weight: 500;
 margin: 0;
}

/* Profile Picture Section */
.wa-profile-pic-section {
 display: flex;
 flex-direction: column;
 align-items: center;
 padding: 40px 20px;
 background-color: var(--sidebar-bg);
 border-bottom: 1px solid var(--border);
}

.wa-profile-avatar-big {
 width: 180px;
 height: 180px;
 border-radius: 50%;
 overflow: hidden;
 background-color: var(--input-bg);
 display: flex;
 align-items: center;
 justify-content: center;
}

.wa-avatar-img {
 width: 100%;
 height: 100%;
 object-fit: cover;
}

.wa-avatar-placeholder-big {
 font-size: 72px;
 font-weight: 300;
 color: var(--subtle);
}

.wa-edit-btn {
 background: transparent;
 border: none;
 color: var(--accent); /* Use your green accent color */
 font-weight: 500;
 margin-top: 15px;
 cursor: pointer;
}

/* Profile Details List */
.wa-profile-list {
 padding: 20px 0;
}

.wa-profile-item {
 display: flex;
 align-items: flex-start;
 padding: 15px 20px;
 border-bottom: 1px solid var(--border);
}

.wa-profile-icon {
 font-size: 24px;
 color: var(--subtle);
 margin-right: 20px;
 /* Use a placeholder icon for now, replace with a real icon library later */
}

.wa-profile-details {
 display: flex;
 flex-direction: column;
 flex: 1;
}

.wa-profile-label {
 font-size: 13px;
 color: var(--subtle);
 margin-bottom: 2px;
}

.wa-profile-value {
 font-size: 16px;
 color: var(--text);
}

.wa-profile-link {
 font-size: 16px;
 color: var(--accent); /* Use green for links/actions */
 cursor: pointer;
}

/* =========================================
   1. VARIABLES - FIXING THE COLORS
   ========================================= */

/* DARK MODE (Default) */
:root {
  /* ... your existing variables ... */
  
  /* The main background for the right-side chat area */
  --chat-bg: #0b141a; 
  
  /* The background for the input bar at the bottom */
  --input-bar-bg: #202c33;
  
  /* Message Bubbles in Dark Mode */
  --bubble-other: #202c33; /* Dark Grey for received messages */
  --bubble-mine: #005c4b;  /* Dark Green for sent messages */
  
  --text-primary: #e9edef;
}

/* LIGHT MODE (Overrides) */
:root[data-theme="light"] {
  /* ... your existing variables ... */
  
  --chat-bg: #e5ddd5; /* WhatsApp Beige */
  --input-bar-bg: #f0f2f5;
  
  --bubble-other: #ffffff;
  --bubble-mine: #d9fdd3;
  
  --text-primary: #111b21;
}

/* =========================================
   2. APPLYING THE COLORS TO THE LAYOUT
   ========================================= */

/* Main Chat Panel (Right Side) */
.wa-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background-color: var(--chat-bg) !important; /* FORCE the dark color */
  position: relative;
  z-index: 1;
}

/* Ensure the message list inside doesn't override it */
.wa-chatwindow, 
.wa-messages {
  background-color: transparent; 
}

/* =========================================
   3. FIXING THE INPUT BAR (Bottom)
   ========================================= */
.wa-inputbar {
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  /* Use the specific variable for the input bar background */
  background-color: var(--input-bar-bg) !important; 
  border-top: 1px solid var(--border);
}

/* Fix input field text color in dark mode */
.wa-input {
  background-color: var(--input-bg);
  color: var(--text-primary);
}

/* =========================================
   4. FIXING MESSAGE BUBBLE CONTRAST
   ========================================= */
/* Received Message (Left) */
.wa-bubble-row.theirs .wa-bubble {
  background-color: var(--bubble-other);
  color: var(--text-primary);
}

/* Sent Message (Right) */
.wa-bubble-row.mine .wa-bubble {
  background-color: var(--bubble-mine);
  color: #e9edef; /* Always light text on dark green bubble */
}